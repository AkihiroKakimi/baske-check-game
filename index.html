<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒã‚¹ã‚±ç·´ç¿’ãƒãƒ£ãƒ³ãƒ”ã‚ªãƒ³</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Orbitron', monospace;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 140, 0, 0.8) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 69, 0, 0.8) 0%, transparent 50%),
                linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .title {
            color: #fff;
            font-size: 2.8em;
            font-weight: 900;
            text-shadow: 
                0 0 10px rgba(255, 140, 0, 0.8),
                0 0 20px rgba(255, 69, 0, 0.6),
                0 0 30px rgba(255, 140, 0, 0.4);
            margin-bottom: 10px;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 10px rgba(255, 140, 0, 0.8), 0 0 20px rgba(255, 69, 0, 0.6), 0 0 30px rgba(255, 140, 0, 0.4); }
            to { text-shadow: 0 0 20px rgba(255, 140, 0, 1), 0 0 30px rgba(255, 69, 0, 0.8), 0 0 40px rgba(255, 140, 0, 0.6); }
        }

        .subtitle {
            color: #ffd700;
            font-size: 1.3em;
            font-weight: 400;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .game-container {
            background: 
                linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 140, 0, 0.3);
            border-radius: 25px;
            box-shadow: 
                0 15px 40px rgba(0,0,0,0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            padding: 30px;
            max-width: 900px;
            width: 100%;
            position: relative;
        }

        .player-area {
            text-align: center;
            margin-bottom: 30px;
            background: 
                linear-gradient(135deg, rgba(255, 140, 0, 0.2) 0%, rgba(255, 69, 0, 0.1) 100%);
            border: 2px solid rgba(255, 140, 0, 0.5);
            border-radius: 20px;
            padding: 30px;
            position: relative;
            overflow: hidden;
        }

        .player-area::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(transparent, rgba(255, 140, 0, 0.1), transparent 30%);
            animation: rotate 6s linear infinite;
            z-index: -1;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .player {
            font-size: 7em;
            margin-bottom: 15px;
            filter: drop-shadow(0 0 20px rgba(255, 140, 0, 0.8));
            animation: playerFloat 3s ease-in-out infinite;
        }

        @keyframes playerFloat {
            0%, 100% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-15px) scale(1.1); }
        }

        .player-name {
            font-size: 1.8em;
            color: #ffd700;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
        }

        .player-level {
            font-size: 1.4em;
            color: #87ceeb;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .status-bars {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }

        .status-item {
            text-align: center;
        }

        .status-label {
            font-size: 1em;
            color: #fff;
            margin-bottom: 8px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .progress-bar {
            width: 130px;
            height: 25px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.3);
            position: relative;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 50%;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.3), transparent);
            border-radius: 15px 15px 0 0;
        }

        .progress-fill {
            height: 100%;
            border-radius: 13px;
            transition: width 0.8s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 49%, rgba(255, 255, 255, 0.4) 50%, transparent 51%);
            animation: shine 2s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .stamina-fill { 
            background: linear-gradient(135deg, #32cd32, #228b22);
            box-shadow: 0 0 10px rgba(50, 205, 50, 0.6);
        }
        .skill-fill { 
            background: linear-gradient(135deg, #ffd700, #ffa500);
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
        }
        .motivation-fill { 
            background: linear-gradient(135deg, #ff69b4, #ff1493);
            box-shadow: 0 0 10px rgba(255, 105, 180, 0.6);
        }

        .practice-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.6em;
            color: #ffd700;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
        }

        .practice-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .practice-btn {
            background: linear-gradient(135deg, #ff6347, #ff4500);
            border: none;
            border-radius: 15px;
            padding: 18px;
            font-size: 1.2em;
            font-weight: 700;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 
                0 6px 20px rgba(255, 99, 71, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
            font-family: 'Orbitron', monospace;
        }

        .practice-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }

        .practice-btn:hover::before {
            left: 100%;
        }

        .practice-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 
                0 10px 30px rgba(255, 99, 71, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            background: linear-gradient(135deg, #ff4500, #ff6347);
        }

        .practice-btn:active {
            transform: translateY(-1px) scale(1.02);
        }

        .streak-info {
            text-align: center;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 165, 0, 0.1));
            border: 2px solid rgba(255, 215, 0, 0.5);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }

        .streak-info::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #ffd700, #ffa500, #ffd700);
            z-index: -1;
            border-radius: 20px;
            animation: borderGlow 3s linear infinite;
        }

        @keyframes borderGlow {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .streak-number {
            font-size: 2.5em;
            color: #ffd700;
            font-weight: 900;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
        }

        .streak-text {
            color: #fff;
            font-size: 1.2em;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .achievements {
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.2), rgba(221, 160, 221, 0.1));
            border: 2px solid rgba(138, 43, 226, 0.5);
            border-radius: 20px;
            padding: 25px;
        }

        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .achievement {
            text-align: center;
            padding: 15px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.1);
            transition: all 0.4s ease;
            border: 2px solid transparent;
        }

        .achievement.unlocked {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.3), rgba(255, 165, 0, 0.2));
            border: 2px solid rgba(255, 215, 0, 0.6);
            transform: scale(1.1);
            box-shadow: 
                0 8px 25px rgba(255, 215, 0, 0.4),
                0 0 20px rgba(255, 215, 0, 0.6);
        }

        .achievement-icon {
            font-size: 2.5em;
            margin-bottom: 8px;
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.8));
        }

        .achievement-name {
            font-size: 0.9em;
            color: #fff;
            font-weight: 700;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.9));
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 140, 0, 0.5);
            border-radius: 20px;
            padding: 35px;
            box-shadow: 
                0 20px 60px rgba(0,0,0,0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            z-index: 1000;
            text-align: center;
            max-width: 450px;
            display: none;
        }

        .message.show {
            display: block;
            animation: messageAppear 0.5s ease;
        }

        @keyframes messageAppear {
            from { 
                opacity: 0; 
                transform: translate(-50%, -50%) scale(0.7) rotateY(90deg); 
            }
            to { 
                opacity: 1; 
                transform: translate(-50%, -50%) scale(1) rotateY(0deg); 
            }
        }

        .message-icon {
            font-size: 4em;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 20px rgba(255, 140, 0, 0.8));
        }

        .message-text {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 25px;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
        }

        .message-btn {
            background: linear-gradient(135deg, #32cd32, #228b22);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            font-size: 1.1em;
            cursor: pointer;
            font-weight: 700;
            box-shadow: 0 6px 20px rgba(50, 205, 50, 0.4);
            transition: all 0.3s ease;
            font-family: 'Orbitron', monospace;
        }

        .message-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(50, 205, 50, 0.6);
        }

        .reset-section {
            text-align: center;
            margin-top: 25px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(255, 82, 82, 0.05));
            border: 2px solid rgba(255, 107, 107, 0.3);
            border-radius: 15px;
        }

        .reset-btn {
            background: linear-gradient(135deg, #ff6b6b, #ff5252);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            font-size: 1.1em;
            cursor: pointer;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
            transition: all 0.3s ease;
        }

        .reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.6);
            background: linear-gradient(135deg, #ff5252, #ff6b6b);
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, rgba(255, 140, 0, 0.3), transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255, 215, 0, 0.4), transparent),
                radial-gradient(1px 1px at 90px 40px, rgba(255, 69, 0, 0.3), transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(255, 140, 0, 0.3), transparent);
            background-repeat: repeat;
            background-size: 150px 100px;
            animation: float 20s linear infinite;
            pointer-events: none;
            z-index: -1;
        }

        @keyframes float {
            0% { transform: translateY(0px) translateX(0px); }
            33% { transform: translateY(-10px) translateX(10px); }
            66% { transform: translateY(-5px) translateX(-5px); }
            100% { transform: translateY(0px) translateX(0px); }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1 class="title">ğŸ€ ãƒã‚¹ã‚±ç·´ç¿’ãƒãƒ£ãƒ³ãƒ”ã‚ªãƒ³ ğŸ†</h1>
        <p class="subtitle">ç·´ç¿’ã—ã¦ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ãªã‚ã†ï¼</p>
    </div>

    <div class="game-container">
        <div class="player-area">
            <div class="player" id="player">ğŸ‘¶</div>
            <div class="player-name" id="playerName">ã—ã‚“ã˜ã‚“</div>
            <div class="player-level" id="playerLevel">ãƒ¬ãƒ™ãƒ« 1</div>
            
            <div class="status-bars">
                <div class="status-item">
                    <div class="status-label">ğŸ’ª ãŸã„ã‚Šã‚‡ã</div>
                    <div class="progress-bar">
                        <div class="progress-fill stamina-fill" id="staminaBar"></div>
                    </div>
                </div>
                <div class="status-item">
                    <div class="status-label">â­ ã‚¹ã‚­ãƒ«</div>
                    <div class="progress-bar">
                        <div class="progress-fill skill-fill" id="skillBar"></div>
                    </div>
                </div>
                <div class="status-item">
                    <div class="status-label">ğŸ”¥ ã‚„ã‚‹ã</div>
                    <div class="progress-bar">
                        <div class="progress-fill motivation-fill" id="motivationBar"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="practice-section">
            <h2 class="section-title">ğŸ€ ãã‚‡ã†ã® ã˜ã—ã‚…ã‚Œã‚“ã—ã‚…ã†</h2>
            <div class="practice-buttons">
                <button class="practice-btn" data-skill="shooting">ğŸ¯ ã‚·ãƒ¥ãƒ¼ãƒˆ</button>
                <button class="practice-btn" data-skill="dribble">âš¡ ãƒ‰ãƒªãƒ–ãƒ«</button>
                <button class="practice-btn" data-skill="passing">ğŸ¤ ãƒ‘ã‚¹</button>
                <button class="practice-btn" data-skill="defense">ğŸ›¡ï¸ ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹</button>
                <button class="practice-btn" data-skill="running">ğŸƒ ã‚‰ã‚“ã«ã‚“ã</button>
                <button class="practice-btn" data-skill="freethrow">ğŸª ãƒ•ãƒªãƒ¼ã‚¹ãƒ­ãƒ¼</button>
            </div>
        </div>

        <div class="streak-info">
            <div class="streak-number" id="streakNumber">0</div>
            <div class="streak-text">æ—¥ã‚Œã‚“ãã ã‚Œã‚“ã—ã‚…ã†ä¸­ï¼</div>
        </div>

        <div class="achievements">
            <h2 class="section-title">ğŸ† ãƒˆãƒ­ãƒ•ã‚£ãƒ¼</h2>
            <div class="achievement-grid" id="achievementGrid">
                <div class="achievement" data-achievement="firstPractice">
                    <div class="achievement-icon">ğŸŒŸ</div>
                    <div class="achievement-name">ã¯ã˜ã‚ã®ä¸€æ­©</div>
                </div>
                <div class="achievement" data-achievement="streak3">
                    <div class="achievement-icon">ğŸ”¥</div>
                    <div class="achievement-name">3æ—¥ã‚Œã‚“ãã</div>
                </div>
                <div class="achievement" data-achievement="streak7">
                    <div class="achievement-icon">ğŸ’ª</div>
                    <div class="achievement-name">1ã—ã‚…ã†ã‹ã‚“</div>
                </div>
                <div class="achievement" data-achievement="levelUp">
                    <div class="achievement-icon">ğŸ“ˆ</div>
                    <div class="achievement-name">ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—</div>
                </div>
                <div class="achievement" data-achievement="allSkills">
                    <div class="achievement-icon">ğŸ¯</div>
                    <div class="achievement-name">ã‚ªãƒ¼ãƒ«ãƒ©ã‚¦ãƒ³ãƒ‰</div>
                </div>
                <div class="achievement" data-achievement="champion">
                    <div class="achievement-icon">ğŸ‘‘</div>
                    <div class="achievement-name">ãƒãƒ£ãƒ³ãƒ”ã‚ªãƒ³</div>
                </div>
                <div class="achievement" data-achievement="dedication">
                    <div class="achievement-icon">ğŸ€</div>
                    <div class="achievement-name">ã‚Œã‚“ã—ã‚…ã†ãŠã«</div>
                </div>
                <div class="achievement" data-achievement="superstar">
                    <div class="achievement-icon">â­</div>
                    <div class="achievement-name">ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¹ã‚¿ãƒ¼</div>
                </div>
            </div>
        </div>

        <div class="reset-section">
            <button class="reset-btn" id="resetBtn">ğŸ”„ ã•ã„ã—ã‚‡ã‹ã‚‰ ã¯ã˜ã‚ã‚‹</button>
            <br><br>
            <button class="reset-btn" id="reloadBtn">ğŸ”„ ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰</button>
        </div>
    </div>

    <div class="message" id="messageModal">
        <div class="message-icon" id="messageIcon">ğŸ‰</div>
        <div class="message-text" id="messageText"></div>
        <button class="message-btn" id="messageOkBtn">OK</button>
    </div>

    <!-- ãƒªã‚»ãƒƒãƒˆç¢ºèªç”¨ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="message" id="resetModal" style="display: none;">
        <div class="message-icon">ğŸ”„</div>
        <div class="message-text">
            ã‚²ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ<br><br>
            âš ï¸ ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ãŒæ¶ˆãˆã¾ã™ï¼<br>
            â€¢ ãƒ¬ãƒ™ãƒ«ã€ã‚¹ã‚­ãƒ«ã€å®Ÿç¸¾ãªã©å…¨ã¦ãƒªã‚»ãƒƒãƒˆ<br>
            â€¢ ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“<br><br>
            æœ¬å½“ã«ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ
        </div>
        <div style="display: flex; gap: 15px; justify-content: center;">
            <button class="message-btn" id="resetConfirmBtn" style="background: linear-gradient(135deg, #ff6b6b, #ff5252);">ğŸ”„ ãƒªã‚»ãƒƒãƒˆå®Ÿè¡Œ</button>
            <button class="message-btn" id="resetCancelBtn">âŒ ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        </div>
    </div>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã¨ã—ã¦å®šç¾©
        var gameData = {
            playerLevel: 1,
            playerStage: 0,
            stamina: 100,
            skill: 0,
            motivation: 50,
            streak: 0,
            totalPracticeSessions: 0,
            practicedSkills: [],
            achievements: [],
            lastPracticeDate: null
        };

        var playerStages = [
            { emoji: 'ğŸ‘¶', name: 'ã—ã‚“ã˜ã‚“' },
            { emoji: 'ğŸ§’', name: 'ã‚¢ãƒãƒãƒ¥ã‚¢' },
            { emoji: 'ğŸ‘¦', name: 'ã‚»ãƒŸãƒ—ãƒ­' },
            { emoji: 'ğŸ€', name: 'ãƒ—ãƒ­ã›ã‚“ã—ã‚…' },
            { emoji: 'â­', name: 'ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¹ã‚¿ãƒ¼' }
        ];

        var achievementData = {
            firstPractice: { name: 'ã¯ã˜ã‚ã®ä¸€æ­©', description: 'ã¯ã˜ã‚ã¦ ã‚Œã‚“ã—ã‚…ã† ã—ãŸï¼' },
            streak3: { name: '3æ—¥ã‚Œã‚“ãã', description: '3æ—¥ã¤ã¥ã‘ã¦ ã‚Œã‚“ã—ã‚…ã† ã—ãŸï¼' },
            streak7: { name: '1ã—ã‚…ã†ã‹ã‚“', description: '7æ—¥ã¤ã¥ã‘ã¦ ã‚Œã‚“ã—ã‚…ã† ã—ãŸï¼' },
            levelUp: { name: 'ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—', description: 'ã›ã‚“ã—ã‚…ãŒ ã›ã„ã¡ã‚‡ã† ã—ãŸï¼' },
            allSkills: { name: 'ã‚ªãƒ¼ãƒ«ãƒ©ã‚¦ãƒ³ãƒ‰', description: 'ã™ã¹ã¦ã® ã‚¹ã‚­ãƒ«ã‚’ ã‚Œã‚“ã—ã‚…ã† ã—ãŸï¼' },
            champion: { name: 'ãƒãƒ£ãƒ³ãƒ”ã‚ªãƒ³', description: 'ãƒ¬ãƒ™ãƒ«5ã« ã¨ã†ãŸã¤ ã—ãŸï¼' },
            dedication: { name: 'ã‚Œã‚“ã—ã‚…ã†ãŠã«', description: '50å› ã‚Œã‚“ã—ã‚…ã† ã—ãŸï¼' },
            superstar: { name: 'ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¹ã‚¿ãƒ¼', description: '100å› ã‚Œã‚“ã—ã‚…ã† ã—ãŸï¼' }
        };

        var practiceMessages = {
            shooting: ['ã‚·ãƒ¥ãƒ¼ãƒˆãŒ ãã¾ã£ãŸï¼', 'ãƒŠã‚¤ã‚¹ã‚·ãƒ¥ãƒ¼ãƒˆï¼', '3ãƒã‚¤ãƒ³ãƒˆ ã›ã„ã“ã†ï¼'],
            dribble: ['ãƒ‰ãƒªãƒ–ãƒ« ã˜ã‚‡ã†ãŸã¤ ã—ãŸï¼', 'ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ï¼', 'ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¢ãƒƒãƒ—ï¼'],
            passing: ['ãƒ‘ã‚¹ ã›ã„ã“ã†ï¼', 'ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ ã°ã¤ãã‚“ï¼', 'ã‚¢ã‚·ã‚¹ãƒˆï¼'],
            defense: ['ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹ ã‹ã‚“ãºãï¼', 'ã‚¹ãƒ†ã‚£ãƒ¼ãƒ«ï¼', 'ãƒ–ãƒ­ãƒƒã‚¯ï¼'],
            running: ['ãŸã„ã‚Šã‚‡ã ã‚¢ãƒƒãƒ—ï¼', 'ã¯ã‚„ã ãªã£ãŸï¼', 'ãã‚“ã«ã ãã‚‡ã†ã‹ï¼'],
            freethrow: ['ãƒ•ãƒªãƒ¼ã‚¹ãƒ­ãƒ¼ ã«ã‚…ãƒ¼ã—ã‚‡ã†ï¼', 'ã›ã„ã‹ã ã›ã„ ã‚¢ãƒƒãƒ—ï¼', 'ã‹ã‚“ã—ã‚“ï¼']
        };

        // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¿ã‚¤ãƒãƒ¼ã‚’è¿½è·¡
        var activeTimers = [];

        // ã‚¿ã‚¤ãƒãƒ¼ã‚’å®‰å…¨ã«è¨­å®šã™ã‚‹é–¢æ•°
        function setSafeTimeout(func, delay) {
            var timerId = setTimeout(func, delay);
            activeTimers.push(timerId);
            return timerId;
        }

        // ã™ã¹ã¦ã®ã‚¿ã‚¤ãƒãƒ¼ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹é–¢æ•°
        function clearAllTimers() {
            for (var i = 0; i < activeTimers.length; i++) {
                clearTimeout(activeTimers[i]);
            }
            activeTimers = [];
        }

        // ?? æ¼”ç®—å­ã®ä»£æ›¿é–¢æ•°ï¼ˆå¤ã„ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œï¼‰
        function nullishCoalescing(value, defaultValue) {
            return (value !== null && value !== undefined) ? value : defaultValue;
        }

        // ã‚·ãƒ³ãƒ—ãƒ«ãªãƒªã‚»ãƒƒãƒˆé–¢æ•°ï¼ˆconfirmå›é¿ç‰ˆï¼‰
        function doReset() {
            console.log('doReseté–¢æ•°ãŒå‘¼ã°ã‚Œã¾ã—ãŸ');
            
            // Claude.aiç’°å¢ƒã§ã¯confirm()ãŒä½¿ãˆãªã„ã®ã§ã€ç‹¬è‡ªãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’ä½¿ç”¨
            console.log('ãƒªã‚»ãƒƒãƒˆç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤ºã—ã¾ã™');
            document.getElementById('resetModal').style.display = 'block';
        }

        // å®Ÿéš›ã®ãƒªã‚»ãƒƒãƒˆå‡¦ç†
        function executeReset() {
            console.log('âœ… ãƒªã‚»ãƒƒãƒˆå®Ÿè¡Œé–‹å§‹');
            
            try {
                // ãƒªã‚»ãƒƒãƒˆç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
                document.getElementById('resetModal').style.display = 'none';
                
                // 1. ã™ã¹ã¦ã®ã‚¿ã‚¤ãƒãƒ¼ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                console.log('1ï¸âƒ£ ã‚¿ã‚¤ãƒãƒ¼ã‚’ã‚¯ãƒªã‚¢ä¸­...');
                clearAllTimers();
                
                // 2. LocalStorageã‚’å®Œå…¨ã‚¯ãƒªã‚¢
                console.log('2ï¸âƒ£ LocalStorageã‚’ã‚¯ãƒªã‚¢ä¸­...');
                localStorage.removeItem('basketballGame');
                localStorage.clear(); // å¿µã®ãŸã‚å…¨ã‚¯ãƒªã‚¢
                
                // 3. ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’åˆæœŸå€¤ã«å®Œå…¨ãƒªã‚»ãƒƒãƒˆ
                console.log('3ï¸âƒ£ ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆä¸­...');
                gameData = {
                    playerLevel: 1,
                    playerStage: 0,
                    stamina: 100,
                    skill: 0,
                    motivation: 50,
                    streak: 0,
                    totalPracticeSessions: 0,
                    practicedSkills: [],
                    achievements: [],
                    lastPracticeDate: null
                };
                console.log('æ–°ã—ã„ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿:', gameData);
                
                // 4. å®Ÿç¸¾è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆ
                console.log('4ï¸âƒ£ å®Ÿç¸¾è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆä¸­...');
                var achievementElements = document.querySelectorAll('.achievement');
                for (var i = 0; i < achievementElements.length; i++) {
                    achievementElements[i].classList.remove('unlocked');
                }
                console.log('å®Ÿç¸¾ãƒªã‚»ãƒƒãƒˆå®Œäº†:', achievementElements.length, 'å€‹');
                
                // 5. è¡¨ç¤ºã‚’å¼·åˆ¶æ›´æ–°
                console.log('5ï¸âƒ£ è¡¨ç¤ºã‚’æ›´æ–°ä¸­...');
                document.getElementById('player').textContent = 'ğŸ‘¶';
                document.getElementById('playerName').textContent = 'ã—ã‚“ã˜ã‚“';
                document.getElementById('playerLevel').textContent = 'ãƒ¬ãƒ™ãƒ« 1';
                document.getElementById('staminaBar').style.width = '100%';
                document.getElementById('skillBar').style.width = '0%';
                document.getElementById('motivationBar').style.width = '50%';
                document.getElementById('streakNumber').textContent = '0';
                
                // 6. â˜…æœ€é‡è¦â˜… ãƒªã‚»ãƒƒãƒˆå¾Œã«saveGame()ã‚’å‘¼ã¶
                console.log('6ï¸âƒ£ ãƒªã‚»ãƒƒãƒˆå¾Œã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ä¸­...');
                saveGame();
                
                // 7. ç¢ºèªã®ãŸã‚å†åº¦ãƒ­ãƒ¼ãƒ‰
                console.log('7ï¸âƒ£ ç¢ºèªã®ãŸã‚å†ãƒ­ãƒ¼ãƒ‰...');
                setTimeout(function() {
                    loadGame();
                    console.log('ğŸ‰ ãƒªã‚»ãƒƒãƒˆå®Œäº†ï¼ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿:', gameData);
                }, 100);
                
                // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
                showMessage('ğŸ‰', 'ã‚²ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸï¼\næ–°ã—ã„ã‚²ãƒ¼ãƒ ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼');
                
            } catch(e) {
                console.error('âŒ ãƒªã‚»ãƒƒãƒˆã‚¨ãƒ©ãƒ¼:', e);
                showMessage('âŒ', 'ãƒªã‚»ãƒƒãƒˆã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:\n' + e.message);
            }
        }

        // ãƒªã‚»ãƒƒãƒˆã‚­ãƒ£ãƒ³ã‚»ãƒ«
        function cancelReset() {
            console.log('âŒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒªã‚»ãƒƒãƒˆã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã—ãŸ');
            document.getElementById('resetModal').style.display = 'none';
            showMessage('â„¹ï¸', 'ãƒªã‚»ãƒƒãƒˆã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã—ãŸã€‚\nã‚²ãƒ¼ãƒ ã‚’ç¶šã‘ã¦ãã ã•ã„ï¼');
        }

        // ç·´ç¿’å®Ÿè¡Œ
        function doPractice(skill) {
            var today = new Date().toDateString();
            
            if (gameData.lastPracticeDate !== today) {
                if (gameData.lastPracticeDate === new Date(Date.now() - 86400000).toDateString()) {
                    gameData.streak++;
                } else {
                    gameData.streak = 1;
                }
                gameData.lastPracticeDate = today;
            }

            if (gameData.practicedSkills.indexOf(skill) === -1) {
                gameData.practicedSkills.push(skill);
            }
            
            gameData.motivation = Math.min(100, gameData.motivation + 12);
            gameData.skill = Math.min(100, gameData.skill + 15);
            gameData.stamina = Math.max(0, gameData.stamina - 8);
            gameData.totalPracticeSessions++;

            var oldStage = gameData.playerStage;
            var requiredSessions = [0, 8, 20, 40, 70];
            for (var i = requiredSessions.length - 1; i >= 0; i--) {
                if (gameData.totalPracticeSessions >= requiredSessions[i]) {
                    gameData.playerStage = Math.min(i, playerStages.length - 1);
                    break;
                }
            }

            if (gameData.playerStage > oldStage) {
                gameData.playerLevel++;
                showMessage('ğŸ‰', 'ãŠã‚ã§ã¨ã†ï¼' + playerStages[gameData.playerStage].name + ' ã« ã›ã„ã¡ã‚‡ã† ã—ãŸã‚ˆï¼');
                unlockAchievement('levelUp');
                if (gameData.playerLevel >= 5) unlockAchievement('champion');
            } else {
                var messages = practiceMessages[skill];
                showMessage('ğŸ’ª', messages[Math.floor(Math.random() * messages.length)]);
            }

            checkAchievements();
            updateDisplay();
            saveGame();
        }

        function checkAchievements() {
            if (gameData.totalPracticeSessions >= 1) unlockAchievement('firstPractice');
            if (gameData.streak >= 3) unlockAchievement('streak3');
            if (gameData.streak >= 7) unlockAchievement('streak7');
            if (gameData.practicedSkills.length >= 6) unlockAchievement('allSkills');
            if (gameData.totalPracticeSessions >= 50) unlockAchievement('dedication');
            if (gameData.totalPracticeSessions >= 100) unlockAchievement('superstar');
        }

        function unlockAchievement(achievementKey) {
            if (gameData.achievements.indexOf(achievementKey) === -1) {
                gameData.achievements.push(achievementKey);
                var achievementInfo = achievementData[achievementKey];
                setSafeTimeout(function() {
                    showMessage('ğŸ†', 'ãƒˆãƒ­ãƒ•ã‚£ãƒ¼ ã‚²ãƒƒãƒˆï¼ã€Œ' + achievementInfo.name + 'ã€\n' + achievementInfo.description);
                }, 1000);
            }
        }

        function updateDisplay() {
            var currentStage = playerStages[gameData.playerStage];
            document.getElementById('player').textContent = currentStage.emoji;
            document.getElementById('playerName').textContent = currentStage.name;
            document.getElementById('playerLevel').textContent = 'ãƒ¬ãƒ™ãƒ« ' + gameData.playerLevel;

            document.getElementById('staminaBar').style.width = gameData.stamina + '%';
            document.getElementById('skillBar').style.width = gameData.skill + '%';
            document.getElementById('motivationBar').style.width = gameData.motivation + '%';

            document.getElementById('streakNumber').textContent = gameData.streak;

            var achievementElements = document.querySelectorAll('.achievement');
            for (var i = 0; i < achievementElements.length; i++) {
                var el = achievementElements[i];
                var achievementKey = el.getAttribute('data-achievement');
                if (gameData.achievements.indexOf(achievementKey) !== -1) {
                    el.classList.add('unlocked');
                } else {
                    el.classList.remove('unlocked');
                }
            }

            // ä½“åŠ›å›å¾©ï¼ˆå®‰å…¨ãªã‚¿ã‚¤ãƒãƒ¼ä½¿ç”¨ï¼‰
            if (gameData.stamina < 100) {
                setSafeTimeout(function() {
                    gameData.stamina = Math.min(100, gameData.stamina + 2);
                    updateDisplay();
                    saveGame();
                }, 120000);
            }
        }

        function showMessage(icon, text) {
            document.getElementById('messageIcon').textContent = icon;
            document.getElementById('messageText').textContent = text;
            document.getElementById('messageModal').classList.add('show');
        }

        function closeMessage() {
            document.getElementById('messageModal').classList.remove('show');
        }

        function loadGame() {
            try {
                var saved = localStorage.getItem('basketballGame');
                if (saved) {
                    var data = JSON.parse(saved);
                    // nullishCoalescingé–¢æ•°ã§0ã‚’æ­£ã—ãæ‰±ã†
                    gameData.playerLevel = nullishCoalescing(data.playerLevel, 1);
                    gameData.playerStage = nullishCoalescing(data.playerStage, 0);
                    gameData.stamina = nullishCoalescing(data.stamina, 100);
                    gameData.skill = nullishCoalescing(data.skill, 0);
                    gameData.motivation = nullishCoalescing(data.motivation, 50);
                    gameData.streak = nullishCoalescing(data.streak, 0);
                    gameData.totalPracticeSessions = nullishCoalescing(data.totalPracticeSessions, 0);
                    gameData.practicedSkills = nullishCoalescing(data.practicedSkills, []);
                    gameData.achievements = nullishCoalescing(data.achievements, []);
                    gameData.lastPracticeDate = nullishCoalescing(data.lastPracticeDate, null);
                }
            } catch(e) {
                console.log('ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', e);
            }
            updateDisplay();
            checkStreak();
        }

        function saveGame() {
            try {
                localStorage.setItem('basketballGame', JSON.stringify(gameData));
            } catch(e) {
                console.log('ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã‚¨ãƒ©ãƒ¼:', e);
            }
        }

        function checkStreak() {
            var today = new Date().toDateString();
            var yesterday = new Date(Date.now() - 86400000).toDateString();
            
            if (gameData.lastPracticeDate === yesterday) {
                // é€£ç¶šç¶™ç¶š
            } else if (gameData.lastPracticeDate !== today) {
                gameData.streak = 0;
            }
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å®Ÿè¡Œ - DOMContentLoaded ã§ç¢ºå®Ÿã«ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²
        window.addEventListener('DOMContentLoaded', function() {
            console.log('DOMContentLoaded: ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²é–‹å§‹');
            
            // ç·´ç¿’ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²
            var practiceButtons = document.querySelectorAll('.practice-btn');
            console.log('ç·´ç¿’ãƒœã‚¿ãƒ³æ•°:', practiceButtons.length);
            for (var i = 0; i < practiceButtons.length; i++) {
                var btn = practiceButtons[i];
                var skill = btn.getAttribute('data-skill');
                // ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã‚’ä½¿ã£ã¦ã‚¹ã‚­ãƒ«å€¤ã‚’ä¿æŒ
                (function(skillValue) {
                    btn.addEventListener('click', function() {
                        console.log('ç·´ç¿’ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯:', skillValue);
                        doPractice(skillValue);
                    });
                })(skill);
            }
            
            // ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã®ãƒ‡ãƒãƒƒã‚°å¼·åŒ–
            var resetBtn = document.getElementById('resetBtn');
            console.log('ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³è¦ç´ :', resetBtn);
            if (resetBtn) {
                console.log('ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ');
                resetBtn.addEventListener('click', function() {
                    console.log('ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸï¼');
                    doReset();
                });
                
                // è¿½åŠ ï¼šç›´æ¥ãƒ†ã‚¹ãƒˆç”¨ã®é–¢æ•°ã‚‚ç™»éŒ²
                resetBtn.onclick = function() {
                    console.log('onclick: ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯');
                    doReset();
                };
            } else {
                console.error('ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ï¼');
            }
            
            // ãƒªãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²
            var reloadBtn = document.getElementById('reloadBtn');
            console.log('ãƒªãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³è¦ç´ :', reloadBtn);
            if (reloadBtn) {
                reloadBtn.addEventListener('click', function() {
                    console.log('ãƒªãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯');
                    location.reload();
                });
            }
            
            // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸OKãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²
            var messageOkBtn = document.getElementById('messageOkBtn');
            if (messageOkBtn) {
                messageOkBtn.addEventListener('click', closeMessage);
            }
            
            // ãƒªã‚»ãƒƒãƒˆç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«ã®ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²
            var resetConfirmBtn = document.getElementById('resetConfirmBtn');
            if (resetConfirmBtn) {
                resetConfirmBtn.addEventListener('click', executeReset);
            }
            
            var resetCancelBtn = document.getElementById('resetCancelBtn');
            if (resetCancelBtn) {
                resetCancelBtn.addEventListener('click', cancelReset);
            }
            
            // ãƒ†ã‚¹ãƒˆç”¨ï¼šãƒªã‚»ãƒƒãƒˆé–¢æ•°ãŒå­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
            console.log('doReseté–¢æ•°:', typeof doReset);
            
            // ã‚²ãƒ¼ãƒ åˆæœŸåŒ–
            loadGame();
            console.log('ã‚²ãƒ¼ãƒ åˆæœŸåŒ–å®Œäº†');
        });

        // ãƒ†ã‚¹ãƒˆç”¨ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°
        window.testReset = function() {
            console.log('ãƒ†ã‚¹ãƒˆãƒªã‚»ãƒƒãƒˆé–¢æ•°ãŒå‘¼ã°ã‚Œã¾ã—ãŸ');
            doReset();
        };
    </script>
</body>
</html>
